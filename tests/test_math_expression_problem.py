import pytest
from benchmark.problems.math_expression_problem import MathExpressionResponseProblem

@pytest.mark.parametrize("expression, expected_result, text", [
    ("((-1 + 2 + 9 * 5) - (-2 + -4 + -4 * -7))", "24", "24"),
    ("((-9 * -5 - 6 + -2) - (-8 - -6 * -3 * 1))", "63", "63"),
    ("((3 * -3 * 6 + -5) - (-2 + -7 - 7 - -7))", "-50", "-50"),
    ("((6 * -6 * 8 * 1) * (-1 * 7 * -6 + -2))", "-11520", "-11520"),
    ("((-6 - -4 + 9 + 0) + (1 + -4 - -9 * 6))", "58", "58"),
    ("((-6 - 4 * 2 - 6) + (1 + -2 * 1 * 7))", "-33", "-33"),
    ("((1 - 0 + 1 - 4) - (-3 * 1 - -6 * -8))", "49", "49"),
    ("((1 + 7 * -9 + -5) + (3 + -5 * 2 - 6))", "-80", "-80"),
    ("((-7 * -9 + 8 * -3) * (5 + -7 - 4 * -5))", "702", "702"),
    ("((-9 - 1 * 5 * -5) - (6 + -3 - -1 * -7))", "20", "20"),
    ("((6 - 0 * 5 + -3) * (6 - -7 + -2 - -7))", "54", "54"),
    ("((2 - -2 + -7 * 8) * (-7 * -8 * 3 - -2))", "-8840", "-8840"),
    ("((8 - 2 + -2 * 6) * (8 + -6 + -8 + -1))", "42", "42"),
    ("((-6 + -9 - -6 + -4) * (-1 - -6 + -4 - 3))", "26", "26"),
    ("((-5 - 4 * -8 + 8) * (4 + 3 - 9 * 7))", "-1960", "-1960"),
    ("((-5 * -7 * -6 + 9) * (-2 - 8 + -5 + 7))", "1608", "1608"),
    ("((8 + 9 - 4 - -9) + (8 + 7 - 6 * 1))", "31", "31"),
    ("((5 * -1 + -6 * -3) + (-1 + -8 - 5 + 3))", "2", "2")
])
def test_math_expression_problem(expression, expected_result, text):
    problem = MathExpressionResponseProblem()
    problem.problem = expression
    problem.answer = expected_result
    assert problem.validate(text) == True

@pytest.mark.parametrize("expression, expected_result, text", [
    ("((-1 + 2 + 9 * 5) - (-2 + -4 + -4 * -7))", "25", "25"),
    ("((-9 * -5 - 6 + -2) - (-8 - -6 * -3 * 1))", "64", "64"),
    ("((3 * -3 * 6 + -5) - (-2 + -7 - 7 - -7))", "-51", "-51"),
    ("((6 * -6 * 8 * 1) * (-1 * 7 * -6 + -2))", "-11521", "-11521"),
    ("((-6 - -4 + 9 + 0) + (1 + -4 - -9 * 6))", "59", "59"),
    ("((-6 - 4 * 2 - 6) + (1 + -2 * 1 * 7))", "-34", "-34"),
    ("((1 - 0 + 1 - 4) - (-3 * 1 - -6 * -8))", "50", "50"),
    ("((1 + 7 * -9 + -5) + (3 + -5 * 2 - 6))", "-81", "-81"),
    ("((-7 * -9 + 8 * -3) * (5 + -7 - 4 * -5))", "703", "703"),
    ("((-9 - 1 * 5 * -5) - (6 + -3 - -1 * -7))", "21", "21"),
    ("((6 - 0 * 5 + -3) * (6 - -7 + -2 - -7))", "55", "55"),
    ("((2 - -2 + -7 * 8) * (-7 * -8 * 3 - -2))", "-8841", "-8841"),
    ("((8 - 2 + -2 * 6) * (8 + -6 + -8 + -1))", "43", "43"),
    ("((-6 + -9 - -6 + -4) * (-1 - -6 + -4 - 3))", "27", "27"),
    ("((-5 - 4 * -8 + 8) * (4 + 3 - 9 * 7))", "-1961", "-1961"),
    ("((-5 * -7 * -6 + 9) * (-2 - 8 + -5 + 7))", "1609", "1609"),
    ("((8 + 9 - 4 - -9) + (8 + 7 - 6 * 1))", "32", "32"),
    ("((5 * -1 + -6 * -3) + (-1 + -8 - 5 + 3))", "3", "3"),
    ("((-1 + 2 + 9 * 5) - (-2 + -4 + -4 * -7))", "", ""),
    ("((-9 * -5 - 6 + -2) - (-8 - -6 * -3 * 1))", "abc", "abc")
])
def test_math_expression_problem_incorrect(expression, expected_result, text):
    problem = MathExpressionResponseProblem()
    problem.problem = expression
    problem.answer = str(eval(expression))
    assert problem.validate(text) == False
